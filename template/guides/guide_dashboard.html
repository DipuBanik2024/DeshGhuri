{% extends "base.html" %}
{% block title %}Guide Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Guide Dashboard</h3>
  <a class="btn btn-outline-primary" href="{% url 'edit_profile' %}">Edit Profile</a>
</div>

{% if profile %}
<div class="card mb-3">
  <div class="card-body">
    <h5 class="card-title">{{ profile.user.get_full_name|default:profile.user.username }}</h5>
    <p class="card-text"><strong>Phone:</strong> {{ profile.phone|default:"N/A" }}</p>
    <p class="card-text"><strong>Experience:</strong> {{ profile.experience_years|default:"0" }} years</p>
    <p class="card-text">{{ profile.bio|default:"No bio available." }}</p>
  </div>
</div>
{% else %}
  <p class="text-warning">Profile not found. Please <a href="{% url 'edit_profile' %}">create your profile</a>.</p>
{% endif %}

<h5>Bookings</h5>
{% if bookings %}
  <ul class="list-group">
    {% for b in bookings %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ b.tourist.get_full_name|default:b.tourist.username }}</strong>
          <div><small>{{ b.date }}</small></div>
          <div><small>{{ b.notes|default:"No notes" }}</small></div>
        </div>
        <div>
          {% if b.confirmed %}
            <span class="badge bg-success">Confirmed</span>
          {% else %}
            <span class="badge bg-secondary">Pending</span>
          {% endif %}
        </div>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No bookings yet.</p>
{% endif %}
{% endblock %}

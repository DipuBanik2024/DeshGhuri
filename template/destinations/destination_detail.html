{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-10 font-sans">

  <!-- Top Section: Main Image + Details -->
  <div class="flex flex-col md:flex-row gap-8 md:gap-12">

    <!-- Left: Main Image -->
    <div class="flex-1 rounded-xl overflow-hidden shadow-lg transform transition duration-500 hover:scale-105">
      <img src="{{ destination.main_image.url }}" alt="{{ destination.name }}" class="w-full h-96 object-cover">
    </div>

    <!-- Right: Info -->
    <div class="flex-1">
      <h2 class="text-4xl font-bold text-gray-800 mb-4">{{ destination.name }}</h2>
      <p class="text-gray-600 mb-2"><span class="font-semibold">Division:</span> {{ destination.division }}</p>
      <p class="text-gray-600 mb-2"><span class="font-semibold">Type:</span> {{ destination.type }}</p>
      <p class="text-gray-600 mb-2"><span class="font-semibold">Best time to visit:</span> {{ destination.best_time }}</p>
      <p class="text-gray-600 mt-4"><span class="font-semibold">Description:</span><br>{{ destination.description }}</p>
    </div>

  </div>

  <!-- Extra Images Section -->
  <h3 class="text-2xl font-bold text-gray-800 mt-12 mb-6 border-b-2 border-green-500 inline-block pb-1">More Photos</h3>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {% for img in destination.extra_images.all %}
      {% if img %}
        <div class="relative rounded-xl overflow-hidden shadow-xl cursor-pointer transform transition duration-300 hover:scale-105">
          <img src="{{ img.url }}" alt="Extra Image" class="w-full h-60 object-cover">
        </div>
      {% endif %}
    {% endfor %}
  </div>

</div>

<!-- Lightbox Modal for Extra Images -->
<div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 hidden items-center justify-center z-50">
  <span id="closeLightbox" class="absolute top-5 right-5 text-white text-3xl cursor-pointer">&times;</span>
  <img id="lightboxImg" src="" class="max-h-[90%] max-w-[90%] rounded-xl shadow-2xl">
</div>

<script>
  // Lightbox functionality
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const closeBtn = document.getElementById('closeLightbox');

  document.querySelectorAll('.grid img').forEach(img => {
    img.addEventListener('click', () => {
      lightboxImg.src = img.src;
      lightbox.classList.remove('hidden');
      lightbox.classList.add('flex');
    });
  });

  closeBtn.addEventListener('click', () => {
    lightbox.classList.add('hidden');
    lightbox.classList.remove('flex');
  });

  lightbox.addEventListener('click', (e) => {
    if(e.target === lightbox) {
      lightbox.classList.add('hidden');
      lightbox.classList.remove('flex');
    }
  });
</script>
{% endblock %}
